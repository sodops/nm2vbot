# ğŸµ Audio to Voice Converter Bot

> Telegram bot that converts audio files to voice messages

[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)](https://t.me/your_bot_username)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb)](https://www.mongodb.com/)

## ğŸŒ Choose Your Language / Tilni tanlang

- **ğŸ‡ºğŸ‡¸ [English Documentation](README_en.md)**
- **ğŸ‡ºğŸ‡¿ [O'zbek tilida hujjatlar](README_uz.md)**

---

## ğŸ“– Quick Overview

This Telegram bot converts audio files to voice messages using FFmpeg and stores user statistics in MongoDB.

**Key Features:**
- ğŸ§ Audio to voice conversion (MP3, WAV, M4A â†’ OGA)
- â±ï¸ Auto-trim files longer than 60 seconds
- ğŸ“Š User statistics with MongoDB
- ğŸ‘‘ Admin commands
- ğŸ³ Docker support

## ğŸš€ Quick Start

```bash
git clone https://github.com/sodops/nm2vbot.git
cd nm2vbot
cp .env.example .env
# Fill your environment variables
npm install
npm run dev
```

## ğŸ“± Bot Commands

| Command | Description |
|---------|-------------|
| `/start` | Start bot and get info |
| `/help` | Show help information |
| `/stats` | View user statistics (admin only) |

---

## ğŸ“ Contact

- ğŸ‘¨â€ğŸ’» **Author:** [Sodiq](https://t.me/sodops)
- ï¿½ **Issues:** [GitHub Issues](https://github.com/sodops/nm2vbot/issues)

---

<div align="center">

**â­ If you like this project, give it a star!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with â¤ï¸ by [Sodiq](https://t.me/sodops)**

</div>

## ğŸš€ O'rnatish

### ğŸ“‹ Talablar

- ![Node.js](https://img.shields.io/badge/Node.js-18+-brightgreen?logo=node.js) (v18 yoki undan yuqori)
- ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) 
- ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) (mahalliy yoki cloud)

### ğŸ“¦ Qadamlar

1. **Repozitoriyani klonlash:**
   ```bash
   git clone https://github.com/sodops/nm2vbot.git
   cd nm2vbot
   ```

2. **Bog'liqliklarni o'rnatish:**
   ```bash
   npm install
   ```

3. **Muhit sozlamalari:**
   
   `.env` faylini yarating:
   ```bash
   cp .env.example .env
   ```
   
   Va quyidagi ma'lumotlarni to'ldiring:
   ```env
   TOKEN=your_telegram_bot_token_here          # @BotFather dan olingan token
   BOT_OWNER_ID=your_telegram_user_id          # Sizning Telegram ID
   MONGODB_URI=mongodb://localhost:27017       # MongoDB manzili
   PORT=3000                                   # Server porti
   ```

4. **MongoDB ni ishga tushiring:**
   ```bash
   # Mahalliy MongoDB uchun
   mongod
   
   # Yoki Docker bilan
   docker run -d -p 27017:27017 --name mongodb mongo:latest
   ```

5. **Botni ishga tushirish:**
   ```bash
   # Development uchun
   npm run dev
   
   # Production uchun
   npm run build && npm start
   ```
## ğŸ“± Foydalanish

### ğŸ‘¤ Oddiy foydalanuvchilar uchun

1. **Audio fayl yuboring** ğŸ“
   - Qo'llab-quvvatlanadigan formatlar: MP3, WAV, M4A, FLAC va boshqalar
   - Maksimal 60 soniya (uzun bo'lsa avtomatik qisqartiriladi)

2. **Natijani oling** ğŸµ
   - Bot audio faylni ovozli xabarga aylantiradi
   - OGA formatida qaytariladi

### ğŸ¤– Bot buyruqlari

| Buyruq | Tavsif | Kimga |
|--------|--------|-------|
| `/start` | Botni boshlash va ma'lumot olish | Hamma |
| `/help` | Yordam ma'lumotlari | Hamma |
| `/stats` | Foydalanuvchilar statistikasi | Faqat admin |

### ğŸ‘‘ Admin uchun

**Stats ko'rish:**
```
/stats
```
Bu buyruq faqat `.env` faylidagi `BOT_OWNER_ID` ga mos kelgan foydalanuvchi uchun ishlaydi.

## ğŸ³ Docker bilan ishga tushirish

### Docker Compose (Tavsiya etiladi)

```bash
# .env faylini yarating
cp .env.example .env

# Environment variables ni to'ldiring
# Keyin ishga tushiring
docker-compose up -d
```

### Oddiy Docker

```bash
# Image yaratish
docker build -t nm2vbot .

# Konteyner ishga tushirish
docker run -d \
  --name nm2vbot \
  -e TOKEN=your_bot_token \
  -e BOT_OWNER_ID=your_user_id \
  -e MONGODB_URI=your_mongodb_uri \
  nm2vbot
```

## â˜ï¸ Deploy qilish

### Render.com

1. **Repository ni Render ga ulang**
2. **Environment variables ni sozlang:**
   - `TOKEN` - Bot token
   - `BOT_OWNER_ID` - Admin user ID
   - `MONGODB_URI` - MongoDB connection string
3. **Deploy qiling** ğŸš€

### Boshqa platformalar

- **Heroku** - `Procfile` qo'shing: `web: npm start`
- **Railway** - Avtomatik deploy
- **Vercel** - Serverless function sifatida

## ğŸ› ï¸ Texnik ma'lumotlar

### Tech Stack

| Texnologiya | Versiya | Maqsad |
|-------------|---------|--------|
| ![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js) | 18+ | Runtime environment |
| ![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript) | 5.0+ | Dasturlash tili |
| ![Grammy](https://img.shields.io/badge/Grammy-1.16+-yellow) | 1.16+ | Telegram bot framework |
| ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) | 6.0+ | Ma'lumotlar bazasi |
| ![Express](https://img.shields.io/badge/Express-4.18+-lightgrey?logo=express) | 4.18+ | Web server |
| ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) | Latest | Audio konvertatsiya |

### Loyiha tuzilishi

```
nm2vbot/
â”œâ”€â”€ ğŸ“„ bot.ts              # Asosiy bot kodi
â”œâ”€â”€ ğŸ“¦ package.json        # Dependencies
â”œâ”€â”€ âš™ï¸ tsconfig.json       # TypeScript config
â”œâ”€â”€ ğŸ³ Dockerfile          # Docker image
â”œâ”€â”€ ğŸ³ compose.yaml        # Docker compose
â”œâ”€â”€ â˜ï¸ render.yaml         # Render.com deploy
â”œâ”€â”€ ğŸ“ README.md           # Hujjatlar
â”œâ”€â”€ ğŸ”§ .env.example        # Environment variables namunasi
â””â”€â”€ ğŸš« .gitignore          # Git ignore fayllar
```

## â— Xatolarni bartaraf qilish

### Keng tarqalgan muammolar

| Muammo | Sabab | Yechim |
|--------|-------|--------|
| ğŸš« **FFmpeg topilmadi** | FFmpeg o'rnatilmagan | `apt install ffmpeg` yoki Docker ishlatish |
| ğŸ”Œ **MongoDB ulanmayapti** | MongoDB ishlamayapti | `mongod` buyrug'i yoki connection string tekshirish |
| ğŸ“ **TypeScript xatolari** | Dependencies yangilanmagan | `npm install` qayta ishga tushirish |
| ğŸ¤– **Bot javob bermayapti** | Noto'g'ri token | `.env` faylidagi `TOKEN` tekshirish |
| ğŸµ **Audio qabul qilmayapti** | Voice message yuborilgan | Audio **fayl** yuborish kerak |

### Debug rejimi

```bash
# Debug loglar bilan ishga tushirish
DEBUG=* npm run dev

# Yoki faqat bot loglari
DEBUG=bot:* npm run dev
```

## ğŸ¤ Hissa qo'shish

Loyihaga hissa qo'shishingizdan xursandmiz! 

### Qadamlar:

1. **Fork qiling** ğŸ´
   ```bash
   # GitHub'da "Fork" tugmasini bosing
   ```

2. **Clone qiling** ğŸ“¥
   ```bash
   git clone https://github.com/your-username/nm2vbot.git
   cd nm2vbot
   ```

3. **Branch yarating** ğŸŒ¿
   ```bash
   git checkout -b feature/amazing-feature
   ```

4. **O'zgarishlar kiriting** âœï¸
   ```bash
   # Kodingizni yozing
   git add .
   git commit -m "feat: add amazing feature"
   ```

5. **Push qiling** ğŸš€
   ```bash
   git push origin feature/amazing-feature
   ```

6. **Pull Request oching** ğŸ“¬

### Code Style

- TypeScript ishlatamiz
- ESLint va Prettier formatni kuzatamiz
- Commit messages [Conventional Commits](https://conventionalcommits.org/) ga muvofiq

## ğŸ“„ Litsenziya

Bu loyiha [MIT License](LICENSE) ostida tarqatiladi.

```
MIT License - siz xohlagan narsani qilishingiz mumkin! 
```

## ğŸŒŸ Minnatdorchilik

- [Grammy](https://grammy.dev/) - Telegram bot framework
- [FFmpeg](https://ffmpeg.org/) - Audio processing
- [MongoDB](https://www.mongodb.com/) - Database
- [TypeScript](https://www.typescriptlang.org/) - Type safety

---

## ğŸ“ Bog'lanish

- ğŸ‘¨â€ğŸ’» **Muallif:** [Sodiq](https://t.me/sodops)
- ğŸ› **Bug report:** [Issues](https://github.com/sodops/nm2vbot/issues)
- ğŸ’¡ **Feature request:** [Discussions](https://github.com/sodops/nm2vbot/discussions)

---

<div align="center">

**â­ Agar loyiha yoqsa, star bosing!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with â¤ï¸ by [Sodiq](https://t.me/sodops)**

</div>

---

# ğŸµ Audio to Voice Converter Bot

> A Telegram bot that converts audio files into voice messages

[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)](https://t.me/your_bot_username)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb)](https://www.mongodb.com/)

## ğŸ“– About the Bot

This Telegram bot converts audio files sent by users into voice messages and sends them back. The bot converts audio files to **OGA** format and automatically trims files longer than 60 seconds to keep only the first part. Additionally, it stores user statistics in MongoDB.

## â­ Features

- ğŸ§ **Audio to voice conversion** - Supports MP3, WAV, M4A and other formats
- â±ï¸ **Auto-trimming** - Files longer than 60 seconds are automatically shortened
- ğŸ“Š **User statistics** - Data storage in MongoDB
- ğŸ‘‘ **Admin panel** - `/stats` command for bot owner
- ğŸŒ **Express server** - With API endpoint
- ğŸ³ **Docker support** - Easy deployment

## ğŸš€ Installation

### ğŸ“‹ Prerequisites

- ![Node.js](https://img.shields.io/badge/Node.js-18+-brightgreen?logo=node.js) (v18 or higher)
- ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg)
- ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) (local or cloud)

### ğŸ“¦ Steps

1. **Clone the repository:**
   ```bash
   git clone https://github.com/sodops/nm2vbot.git
   cd nm2vbot
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Environment setup:**
   
   Create `.env` file:
   ```bash
   cp .env.example .env
   ```
   
   Fill in the following information:
   ```env
   TOKEN=your_telegram_bot_token_here          # Token from @BotFather
   BOT_OWNER_ID=your_telegram_user_id          # Your Telegram ID
   MONGODB_URI=mongodb://localhost:27017       # MongoDB URI
   PORT=3000                                   # Server port
   ```

4. **Start MongoDB:**
   ```bash
   # For local MongoDB
   mongod
   
   # Or with Docker
   docker run -d -p 27017:27017 --name mongodb mongo:latest
   ```

5. **Run the bot:**
   ```bash
   # For development
   npm run dev
   
   # For production
   npm run build && npm start
   ```

## ğŸ“± Usage

### ğŸ‘¤ For Regular Users

1. **Send an audio file** ğŸ“
   - Supported formats: MP3, WAV, M4A, FLAC and others
   - Maximum 60 seconds (longer files are automatically trimmed)

2. **Get the result** ğŸµ
   - Bot converts audio file to voice message
   - Returned in OGA format

### ğŸ¤– Bot Commands

| Command | Description | Access |
|---------|-------------|--------|
| `/start` | Start bot and get info | Everyone |
| `/help` | Help information | Everyone |
| `/stats` | User statistics | Admin only |

### ğŸ‘‘ For Admin

**View stats:**
```
/stats
```
This command only works for the user matching `BOT_OWNER_ID` in the `.env` file.

## ğŸ³ Docker Deployment

### Docker Compose (Recommended)

```bash
# Create .env file
cp .env.example .env

# Fill environment variables
# Then run
docker-compose up -d
```

### Plain Docker

```bash
# Build image
docker build -t nm2vbot .

# Run container
docker run -d \
  --name nm2vbot \
  -e TOKEN=your_bot_token \
  -e BOT_OWNER_ID=your_user_id \
  -e MONGODB_URI=your_mongodb_uri \
  nm2vbot
```

## â˜ï¸ Cloud Deployment

### Render.com

1. **Connect repository to Render**
2. **Set environment variables:**
   - `TOKEN` - Bot token
   - `BOT_OWNER_ID` - Admin user ID
   - `MONGODB_URI` - MongoDB connection string
3. **Deploy** ğŸš€

### Other platforms

- **Heroku** - Add `Procfile`: `web: npm start`
- **Railway** - Auto deploy
- **Vercel** - As serverless function

## ğŸ› ï¸ Technical Information

### Tech Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| ![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js) | 18+ | Runtime environment |
| ![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript) | 5.0+ | Programming language |
| ![Grammy](https://img.shields.io/badge/Grammy-1.16+-yellow) | 1.16+ | Telegram bot framework |
| ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) | 6.0+ | Database |
| ![Express](https://img.shields.io/badge/Express-4.18+-lightgrey?logo=express) | 4.18+ | Web server |
| ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) | Latest | Audio conversion |

### Project Structure

```
nm2vbot/
â”œâ”€â”€ ğŸ“„ bot.ts              # Main bot code
â”œâ”€â”€ ğŸ“¦ package.json        # Dependencies
â”œâ”€â”€ âš™ï¸ tsconfig.json       # TypeScript config
â”œâ”€â”€ ğŸ³ Dockerfile          # Docker image
â”œâ”€â”€ ğŸ³ compose.yaml        # Docker compose
â”œâ”€â”€ â˜ï¸ render.yaml         # Render.com deploy
â”œâ”€â”€ ğŸ“ README.md           # Documentation
â”œâ”€â”€ ğŸ”§ .env.example        # Environment variables template
â””â”€â”€ ğŸš« .gitignore          # Git ignore files
```

## â— Troubleshooting

### Common Issues

| Problem | Cause | Solution |
|---------|-------|----------|
| ğŸš« **FFmpeg not found** | FFmpeg not installed | `apt install ffmpeg` or use Docker |
| ğŸ”Œ **MongoDB not connecting** | MongoDB not running | Run `mongod` or check connection string |
| ğŸ“ **TypeScript errors** | Dependencies outdated | Run `npm install` again |
| ğŸ¤– **Bot not responding** | Wrong token | Check `TOKEN` in `.env` file |
| ğŸµ **Audio not accepted** | Voice message sent | Send audio **file** instead |

### Debug Mode

```bash
# Run with debug logs
DEBUG=* npm run dev

# Or only bot logs
DEBUG=bot:* npm run dev
```

## ğŸ¤ Contributing

We welcome contributions to the project!

### Steps:

1. **Fork** ğŸ´
2. **Clone** ğŸ“¥
3. **Create branch** ğŸŒ¿
4. **Make changes** âœï¸
5. **Push** ğŸš€
6. **Open Pull Request** ğŸ“¬

### Code Style

- Use TypeScript
- Follow ESLint and Prettier formatting
- Commit messages follow [Conventional Commits](https://conventionalcommits.org/)

## ğŸ“„ License

This project is distributed under the [MIT License](LICENSE).

## ğŸŒŸ Acknowledgments

- [Grammy](https://grammy.dev/) - Telegram bot framework
- [FFmpeg](https://ffmpeg.org/) - Audio processing
- [MongoDB](https://www.mongodb.com/) - Database
- [TypeScript](https://www.typescriptlang.org/) - Type safety

---

## ğŸ“ Contact

- ğŸ‘¨â€ğŸ’» **Author:** [Sodiq](https://t.me/sodops)
- ğŸ› **Bug report:** [Issues](https://github.com/sodops/nm2vbot/issues)
- ğŸ’¡ **Feature request:** [Discussions](https://github.com/sodops/nm2vbot/discussions)

---

<div align="center">

**â­ If you like this project, give it a star!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with â¤ï¸ by [Sodiq](https://t.me/sodops)**

</div>
