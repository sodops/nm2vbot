# 🎵 Audio to Voice Converter Bot

> Telegram bot that converts audio files to voice messages

[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)](https://t.me/your_bot_username)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb)](https://www.mongodb.com/)

## 🌐 Choose Your Language / Tilni tanlang

- **🇺🇸 [English Documentation](README_en.md)**
- **🇺🇿 [O'zbek tilida hujjatlar](README_uz.md)**

---

## 📖 Quick Overview

This Telegram bot converts audio files to voice messages using FFmpeg and stores user statistics in MongoDB.

**Key Features:**
- 🎧 Audio to voice conversion (MP3, WAV, M4A → OGA)
- ⏱️ Auto-trim files longer than 60 seconds
- 📊 User statistics with MongoDB
- 👑 Admin commands
- 🐳 Docker support

## 🚀 Quick Start

```bash
git clone https://github.com/sodops/nm2vbot.git
cd nm2vbot
cp .env.example .env
# Fill your environment variables
npm install
npm run dev
```

## 📱 Bot Commands

| Command | Description |
|---------|-------------|
| `/start` | Start bot and get info |
| `/help` | Show help information |
| `/stats` | View user statistics (admin only) |

---

## 📞 Contact

- 👨‍💻 **Author:** [Sodiq](https://t.me/sodops)
- � **Issues:** [GitHub Issues](https://github.com/sodops/nm2vbot/issues)

---

<div align="center">

**⭐ If you like this project, give it a star!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with ❤️ by [Sodiq](https://t.me/sodops)**

</div>

## 🚀 O'rnatish

### 📋 Talablar

- ![Node.js](https://img.shields.io/badge/Node.js-18+-brightgreen?logo=node.js) (v18 yoki undan yuqori)
- ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) 
- ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) (mahalliy yoki cloud)

### 📦 Qadamlar

1. **Repozitoriyani klonlash:**
   ```bash
   git clone https://github.com/sodops/nm2vbot.git
   cd nm2vbot
   ```

2. **Bog'liqliklarni o'rnatish:**
   ```bash
   npm install
   ```

3. **Muhit sozlamalari:**
   
   `.env` faylini yarating:
   ```bash
   cp .env.example .env
   ```
   
   Va quyidagi ma'lumotlarni to'ldiring:
   ```env
   TOKEN=your_telegram_bot_token_here          # @BotFather dan olingan token
   BOT_OWNER_ID=your_telegram_user_id          # Sizning Telegram ID
   MONGODB_URI=mongodb://localhost:27017       # MongoDB manzili
   PORT=3000                                   # Server porti
   ```

4. **MongoDB ni ishga tushiring:**
   ```bash
   # Mahalliy MongoDB uchun
   mongod
   
   # Yoki Docker bilan
   docker run -d -p 27017:27017 --name mongodb mongo:latest
   ```

5. **Botni ishga tushirish:**
   ```bash
   # Development uchun
   npm run dev
   
   # Production uchun
   npm run build && npm start
   ```
## 📱 Foydalanish

### 👤 Oddiy foydalanuvchilar uchun

1. **Audio fayl yuboring** 📎
   - Qo'llab-quvvatlanadigan formatlar: MP3, WAV, M4A, FLAC va boshqalar
   - Maksimal 60 soniya (uzun bo'lsa avtomatik qisqartiriladi)

2. **Natijani oling** 🎵
   - Bot audio faylni ovozli xabarga aylantiradi
   - OGA formatida qaytariladi

### 🤖 Bot buyruqlari

| Buyruq | Tavsif | Kimga |
|--------|--------|-------|
| `/start` | Botni boshlash va ma'lumot olish | Hamma |
| `/help` | Yordam ma'lumotlari | Hamma |
| `/stats` | Foydalanuvchilar statistikasi | Faqat admin |

### 👑 Admin uchun

**Stats ko'rish:**
```
/stats
```
Bu buyruq faqat `.env` faylidagi `BOT_OWNER_ID` ga mos kelgan foydalanuvchi uchun ishlaydi.

## 🐳 Docker bilan ishga tushirish

### Docker Compose (Tavsiya etiladi)

```bash
# .env faylini yarating
cp .env.example .env

# Environment variables ni to'ldiring
# Keyin ishga tushiring
docker-compose up -d
```

### Oddiy Docker

```bash
# Image yaratish
docker build -t nm2vbot .

# Konteyner ishga tushirish
docker run -d \
  --name nm2vbot \
  -e TOKEN=your_bot_token \
  -e BOT_OWNER_ID=your_user_id \
  -e MONGODB_URI=your_mongodb_uri \
  nm2vbot
```

## ☁️ Deploy qilish

### Render.com

1. **Repository ni Render ga ulang**
2. **Environment variables ni sozlang:**
   - `TOKEN` - Bot token
   - `BOT_OWNER_ID` - Admin user ID
   - `MONGODB_URI` - MongoDB connection string
3. **Deploy qiling** 🚀

### Boshqa platformalar

- **Heroku** - `Procfile` qo'shing: `web: npm start`
- **Railway** - Avtomatik deploy
- **Vercel** - Serverless function sifatida

## 🛠️ Texnik ma'lumotlar

### Tech Stack

| Texnologiya | Versiya | Maqsad |
|-------------|---------|--------|
| ![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js) | 18+ | Runtime environment |
| ![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript) | 5.0+ | Dasturlash tili |
| ![Grammy](https://img.shields.io/badge/Grammy-1.16+-yellow) | 1.16+ | Telegram bot framework |
| ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) | 6.0+ | Ma'lumotlar bazasi |
| ![Express](https://img.shields.io/badge/Express-4.18+-lightgrey?logo=express) | 4.18+ | Web server |
| ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) | Latest | Audio konvertatsiya |

### Loyiha tuzilishi

```
nm2vbot/
├── 📄 bot.ts              # Asosiy bot kodi
├── 📦 package.json        # Dependencies
├── ⚙️ tsconfig.json       # TypeScript config
├── 🐳 Dockerfile          # Docker image
├── 🐳 compose.yaml        # Docker compose
├── ☁️ render.yaml         # Render.com deploy
├── 📝 README.md           # Hujjatlar
├── 🔧 .env.example        # Environment variables namunasi
└── 🚫 .gitignore          # Git ignore fayllar
```

## ❗ Xatolarni bartaraf qilish

### Keng tarqalgan muammolar

| Muammo | Sabab | Yechim |
|--------|-------|--------|
| 🚫 **FFmpeg topilmadi** | FFmpeg o'rnatilmagan | `apt install ffmpeg` yoki Docker ishlatish |
| 🔌 **MongoDB ulanmayapti** | MongoDB ishlamayapti | `mongod` buyrug'i yoki connection string tekshirish |
| 📝 **TypeScript xatolari** | Dependencies yangilanmagan | `npm install` qayta ishga tushirish |
| 🤖 **Bot javob bermayapti** | Noto'g'ri token | `.env` faylidagi `TOKEN` tekshirish |
| 🎵 **Audio qabul qilmayapti** | Voice message yuborilgan | Audio **fayl** yuborish kerak |

### Debug rejimi

```bash
# Debug loglar bilan ishga tushirish
DEBUG=* npm run dev

# Yoki faqat bot loglari
DEBUG=bot:* npm run dev
```

## 🤝 Hissa qo'shish

Loyihaga hissa qo'shishingizdan xursandmiz! 

### Qadamlar:

1. **Fork qiling** 🍴
   ```bash
   # GitHub'da "Fork" tugmasini bosing
   ```

2. **Clone qiling** 📥
   ```bash
   git clone https://github.com/your-username/nm2vbot.git
   cd nm2vbot
   ```

3. **Branch yarating** 🌿
   ```bash
   git checkout -b feature/amazing-feature
   ```

4. **O'zgarishlar kiriting** ✏️
   ```bash
   # Kodingizni yozing
   git add .
   git commit -m "feat: add amazing feature"
   ```

5. **Push qiling** 🚀
   ```bash
   git push origin feature/amazing-feature
   ```

6. **Pull Request oching** 📬

### Code Style

- TypeScript ishlatamiz
- ESLint va Prettier formatni kuzatamiz
- Commit messages [Conventional Commits](https://conventionalcommits.org/) ga muvofiq

## 📄 Litsenziya

Bu loyiha [MIT License](LICENSE) ostida tarqatiladi.

```
MIT License - siz xohlagan narsani qilishingiz mumkin! 
```

## 🌟 Minnatdorchilik

- [Grammy](https://grammy.dev/) - Telegram bot framework
- [FFmpeg](https://ffmpeg.org/) - Audio processing
- [MongoDB](https://www.mongodb.com/) - Database
- [TypeScript](https://www.typescriptlang.org/) - Type safety

---

## 📞 Bog'lanish

- 👨‍💻 **Muallif:** [Sodiq](https://t.me/sodops)
- 🐛 **Bug report:** [Issues](https://github.com/sodops/nm2vbot/issues)
- 💡 **Feature request:** [Discussions](https://github.com/sodops/nm2vbot/discussions)

---

<div align="center">

**⭐ Agar loyiha yoqsa, star bosing!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with ❤️ by [Sodiq](https://t.me/sodops)**

</div>

---

# 🎵 Audio to Voice Converter Bot

> A Telegram bot that converts audio files into voice messages

[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)](https://t.me/your_bot_username)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb)](https://www.mongodb.com/)

## 📖 About the Bot

This Telegram bot converts audio files sent by users into voice messages and sends them back. The bot converts audio files to **OGA** format and automatically trims files longer than 60 seconds to keep only the first part. Additionally, it stores user statistics in MongoDB.

## ⭐ Features

- 🎧 **Audio to voice conversion** - Supports MP3, WAV, M4A and other formats
- ⏱️ **Auto-trimming** - Files longer than 60 seconds are automatically shortened
- 📊 **User statistics** - Data storage in MongoDB
- 👑 **Admin panel** - `/stats` command for bot owner
- 🌐 **Express server** - With API endpoint
- 🐳 **Docker support** - Easy deployment

## 🚀 Installation

### 📋 Prerequisites

- ![Node.js](https://img.shields.io/badge/Node.js-18+-brightgreen?logo=node.js) (v18 or higher)
- ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg)
- ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) (local or cloud)

### 📦 Steps

1. **Clone the repository:**
   ```bash
   git clone https://github.com/sodops/nm2vbot.git
   cd nm2vbot
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Environment setup:**
   
   Create `.env` file:
   ```bash
   cp .env.example .env
   ```
   
   Fill in the following information:
   ```env
   TOKEN=your_telegram_bot_token_here          # Token from @BotFather
   BOT_OWNER_ID=your_telegram_user_id          # Your Telegram ID
   MONGODB_URI=mongodb://localhost:27017       # MongoDB URI
   PORT=3000                                   # Server port
   ```

4. **Start MongoDB:**
   ```bash
   # For local MongoDB
   mongod
   
   # Or with Docker
   docker run -d -p 27017:27017 --name mongodb mongo:latest
   ```

5. **Run the bot:**
   ```bash
   # For development
   npm run dev
   
   # For production
   npm run build && npm start
   ```

## 📱 Usage

### 👤 For Regular Users

1. **Send an audio file** 📎
   - Supported formats: MP3, WAV, M4A, FLAC and others
   - Maximum 60 seconds (longer files are automatically trimmed)

2. **Get the result** 🎵
   - Bot converts audio file to voice message
   - Returned in OGA format

### 🤖 Bot Commands

| Command | Description | Access |
|---------|-------------|--------|
| `/start` | Start bot and get info | Everyone |
| `/help` | Help information | Everyone |
| `/stats` | User statistics | Admin only |

### 👑 For Admin

**View stats:**
```
/stats
```
This command only works for the user matching `BOT_OWNER_ID` in the `.env` file.

## 🐳 Docker Deployment

### Docker Compose (Recommended)

```bash
# Create .env file
cp .env.example .env

# Fill environment variables
# Then run
docker-compose up -d
```

### Plain Docker

```bash
# Build image
docker build -t nm2vbot .

# Run container
docker run -d \
  --name nm2vbot \
  -e TOKEN=your_bot_token \
  -e BOT_OWNER_ID=your_user_id \
  -e MONGODB_URI=your_mongodb_uri \
  nm2vbot
```

## ☁️ Cloud Deployment

### Render.com

1. **Connect repository to Render**
2. **Set environment variables:**
   - `TOKEN` - Bot token
   - `BOT_OWNER_ID` - Admin user ID
   - `MONGODB_URI` - MongoDB connection string
3. **Deploy** 🚀

### Other platforms

- **Heroku** - Add `Procfile`: `web: npm start`
- **Railway** - Auto deploy
- **Vercel** - As serverless function

## 🛠️ Technical Information

### Tech Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| ![Node.js](https://img.shields.io/badge/Node.js-18+-green?logo=node.js) | 18+ | Runtime environment |
| ![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript) | 5.0+ | Programming language |
| ![Grammy](https://img.shields.io/badge/Grammy-1.16+-yellow) | 1.16+ | Telegram bot framework |
| ![MongoDB](https://img.shields.io/badge/MongoDB-6.0+-green?logo=mongodb) | 6.0+ | Database |
| ![Express](https://img.shields.io/badge/Express-4.18+-lightgrey?logo=express) | 4.18+ | Web server |
| ![FFmpeg](https://img.shields.io/badge/FFmpeg-latest-red?logo=ffmpeg) | Latest | Audio conversion |

### Project Structure

```
nm2vbot/
├── 📄 bot.ts              # Main bot code
├── 📦 package.json        # Dependencies
├── ⚙️ tsconfig.json       # TypeScript config
├── 🐳 Dockerfile          # Docker image
├── 🐳 compose.yaml        # Docker compose
├── ☁️ render.yaml         # Render.com deploy
├── 📝 README.md           # Documentation
├── 🔧 .env.example        # Environment variables template
└── 🚫 .gitignore          # Git ignore files
```

## ❗ Troubleshooting

### Common Issues

| Problem | Cause | Solution |
|---------|-------|----------|
| 🚫 **FFmpeg not found** | FFmpeg not installed | `apt install ffmpeg` or use Docker |
| 🔌 **MongoDB not connecting** | MongoDB not running | Run `mongod` or check connection string |
| 📝 **TypeScript errors** | Dependencies outdated | Run `npm install` again |
| 🤖 **Bot not responding** | Wrong token | Check `TOKEN` in `.env` file |
| 🎵 **Audio not accepted** | Voice message sent | Send audio **file** instead |

### Debug Mode

```bash
# Run with debug logs
DEBUG=* npm run dev

# Or only bot logs
DEBUG=bot:* npm run dev
```

## 🤝 Contributing

We welcome contributions to the project!

### Steps:

1. **Fork** 🍴
2. **Clone** 📥
3. **Create branch** 🌿
4. **Make changes** ✏️
5. **Push** 🚀
6. **Open Pull Request** 📬

### Code Style

- Use TypeScript
- Follow ESLint and Prettier formatting
- Commit messages follow [Conventional Commits](https://conventionalcommits.org/)

## 📄 License

This project is distributed under the [MIT License](LICENSE).

## 🌟 Acknowledgments

- [Grammy](https://grammy.dev/) - Telegram bot framework
- [FFmpeg](https://ffmpeg.org/) - Audio processing
- [MongoDB](https://www.mongodb.com/) - Database
- [TypeScript](https://www.typescriptlang.org/) - Type safety

---

## 📞 Contact

- 👨‍💻 **Author:** [Sodiq](https://t.me/sodops)
- 🐛 **Bug report:** [Issues](https://github.com/sodops/nm2vbot/issues)
- 💡 **Feature request:** [Discussions](https://github.com/sodops/nm2vbot/discussions)

---

<div align="center">

**⭐ If you like this project, give it a star!**

[![GitHub stars](https://img.shields.io/github/stars/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/sodops/nm2vbot?style=social)](https://github.com/sodops/nm2vbot/network)

**Made with ❤️ by [Sodiq](https://t.me/sodops)**

</div>
